<div>
  <!-- Header Section -->
  <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6">
    <div>
      <h1 class="text-xl sm:text-2xl font-bold">Community Meals</h1>
      <p class="text-sm sm:text-base text-base-content/70 mt-1">Weekly shared dinners - sign up to cook or RSVP to attend!</p>
    </div>
    <div class="flex gap-2">
      <%= link_to my_meals_meals_path, class: "btn btn-outline btn-sm" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
        </svg>
        <span class="hidden sm:inline">My Meals</span>
      <% end %>
      <%= link_to calendar_meals_path, class: "btn btn-outline btn-sm hidden sm:inline-flex" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
        </svg>
        Calendar
      <% end %>
      <%= link_to meal_schedules_path, class: "btn btn-outline btn-sm hidden sm:inline-flex" do %>
        Schedules
      <% end %>
      <%= link_to new_meal_path, class: "btn btn-primary btn-sm" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"/>
        </svg>
        <span class="hidden sm:inline">Add Meal</span>
      <% end %>
    </div>
  </div>

  <!-- Tab Navigation -->
  <div class="overflow-x-auto mb-6">
    <div class="tabs tabs-boxed w-fit min-w-full sm:min-w-0">
      <%= link_to meals_path(view: "upcoming"),
          class: "tab flex-nowrap whitespace-nowrap #{'tab-active' if @current_view == 'upcoming'}" do %>
        Upcoming
      <% end %>
      <%= link_to meals_path(view: "needs_cooks"),
          class: "tab flex-nowrap whitespace-nowrap #{'tab-active' if @current_view == 'needs_cooks'}" do %>
        Needs Cooks (<%= @needs_cooks_count %>)
      <% end %>
      <%= link_to meals_path(view: "past"),
          class: "tab flex-nowrap whitespace-nowrap #{'tab-active' if @current_view == 'past'}" do %>
        Past Meals
      <% end %>
    </div>
  </div>

  <!-- Meal Cards Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <% if @meals.present? %>
      <% @meals.each do |meal| %>
        <%= render "meal_card", meal: meal %>
      <% end %>
    <% else %>
      <div class="col-span-full text-center p-12">
        <div class="text-6xl mb-4">üçΩÔ∏è</div>
        <h3 class="text-xl font-medium mb-2">No meals found</h3>
        <p class="text-base-content/70">
          <% if @current_view == "needs_cooks" %>
            All upcoming meals have cooks assigned!
          <% elsif @current_view == "past" %>
            No past meals to display.
          <% else %>
            No upcoming meals scheduled.
          <% end %>
        </p>
      </div>
    <% end %>
  </div>
</div>
