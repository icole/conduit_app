<div class="container mx-auto px-4 py-8">
  <div class="card bg-base-100 shadow-xl">
    <div class="card-body">
      <div class="flex justify-between items-center mb-6">
        <h1 class="card-title text-2xl font-bold">Decision Log</h1>
        <%= link_to "New Decision", new_decision_path, class: "btn btn-primary" %>
      </div>

      <% if @decisions.any? %>
        <div class="overflow-x-auto">
          <table class="table table-zebra w-full">
            <thead>
              <tr>
                <th>Title</th>
                <th>Date</th>
                <th>Meeting</th>
                <th>Notes</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <% @decisions.each do |decision| %>
                <tr>
                  <td class="font-medium"><%= link_to decision.title, decision_path(decision), class: "link link-hover" %></td>
                  <td><%= decision.formatted_date %></td>
                  <td>
                    <% if decision.calendar_event %>
                      <%= link_to decision.calendar_event.title, calendar_event_path(decision.calendar_event), class: "link link-hover text-sm" %>
                    <% else %>
                      <span class="text-base-content/60">-</span>
                    <% end %>
                  </td>
                  <td>
                    <% if decision.document %>
                      <%= link_to "View Notes", decision.document.safe_google_drive_url, target: "_blank", class: "btn btn-xs btn-outline btn-info" %>
                    <% else %>
                      <span class="text-base-content/60">-</span>
                    <% end %>
                  </td>
                  <td>
                    <div class="flex gap-2">
                      <%= link_to "Edit", edit_decision_path(decision), class: "btn btn-xs btn-outline" %>
                      <%= button_to "Delete", decision_path(decision), method: :delete, data: { turbo_confirm: "Are you sure?" }, class: "btn btn-xs btn-outline btn-error" %>
                    </div>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>

        <div class="mt-6">
          <p>Total decisions: <%= @decisions.count %></p>
        </div>
      <% else %>
        <div class="alert alert-info">
          <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <span>No decisions recorded yet. Create your first decision to get started!</span>
        </div>
      <% end %>
    </div>
  </div>
</div>
