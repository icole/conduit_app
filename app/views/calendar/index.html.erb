<div class="container mx-auto px-4 py-8">
  <div class="card bg-base-100 shadow-xl">
    <div class="card-body">
      <h1 class="card-title text-2xl font-bold mb-6">Calendar</h1>

      <%= month_calendar(events: CalendarEvent.all) do |date, events| %>
        <div class="flex justify-between items-center mb-1">
          <div class="font-bold"><%= date.day %></div>
          <%= link_to "add",
              new_calendar_event_path(calendar_event: { start_time: date.to_datetime }), 
              data: { 
                turbo: false
              }, 
              class: "badge badge-primary badge-sm",
              title: "Add event" %>
        </div>

        <% events.each do |event| %>
          <div class="bg-info bg-opacity-20 rounded-md p-1 mb-1">
            <%= link_to event.title, edit_calendar_event_path(event), 
                data: { 
                  turbo: false
                }, 
                class: "text-sm truncate block" %>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

<%= stylesheet_link_tag "calendar", "data-turbo-track": "reload" %>